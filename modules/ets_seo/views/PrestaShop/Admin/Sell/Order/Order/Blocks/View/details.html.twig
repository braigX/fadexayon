{% set statusTitle %}
    {{ 'Status'|trans({}, 'Admin.Global') }} ({{ orderForViewing.history.statuses|length }})
{% endset %}

{% set documentsTitle %}
    {{ 'Documents'|trans({}, 'Admin.Orderscustomers.Feature') }} (<span class="count">{{ orderForViewing.documents.documents|length }}</span>)
{% endset %}

{% set carriersTitle %}
    {{ 'Carriers'|trans({}, 'Admin.Shipping.Feature') }} (<span class="count">{{ orderForViewing.shipping.carriers|length }}</span>)
{% endset %}

{% set merchantReturnsTitle %}
    {{ 'Merchandise returns'|trans({}, 'Admin.Orderscustomers.Feature') }} (<span data-role="count">{{ orderForViewing.returns.orderReturns|length }}</span>)
{% endset %}

<div class="mt-2">
    <ul class="nav nav nav-tabs d-print-none 111" role="tablist">
        <li class="nav-item">
            <a class="nav-link active show" id="historyTab" data-toggle="tab" href="#historyTabContent" role="tab" aria-controls="historyTabContent" aria-expanded="true" aria-selected="false">
                <i class="material-icons">history</i>
                {{ statusTitle | raw }}
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="orderDocumentsTab" data-toggle="tab" href="#orderDocumentsTabContent" role="tab" aria-controls="orderDocumentsTabContent" aria-expanded="true" aria-selected="false">
                <i class="material-icons">note</i>
                {{ documentsTitle | raw }}
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="orderShippingTab" data-toggle="tab" href="#orderShippingTabContent" role="tab" aria-controls="orderShippingTabContent" aria-expanded="true" aria-selected="false">
                <i class="material-icons">local_shipping</i>
                {{ carriersTitle | raw }}
            </a>
        </li>
        {% if merchandiseReturnEnabled %}
            <li class="nav-item">
                <a class="nav-link" id="orderReturnsTab" data-toggle="tab" href="#orderReturnsTabContent" role="tab" aria-controls="orderReturnsTabContent" aria-expanded="true" aria-selected="false">
                    <i class="material-icons">replay</i>
                    {{ merchantReturnsTitle | raw }}
                </a>
            </li>
        {% endif %}
    </ul>

    <div class="tab-content">
        <div class="tab-pane d-print-block fade show active" id="historyTabContent" role="tabpanel" aria-labelledby="historyTab">
            {% embed '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/details_card.html.twig' %}
                {% block header %}
                    {{ statusTitle }}
                {% endblock %}
                {% block body %}
                    {% include '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/history.html.twig' %}
                {% endblock %}
            {% endembed %}
        </div>
        <div class="tab-pane d-print-block fade" id="orderDocumentsTabContent" role="tabpanel" aria-labelledby="orderDocumentsTab">
            {% embed '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/details_card.html.twig' %}
                {% block header %}
                    {{ documentsTitle }}
                {% endblock %}
                {% block body %}
                    {% include '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/documents.html.twig' %}
                {% endblock %}
            {% endembed %}
        </div>
        <div class="tab-pane d-print-block fade" id="orderShippingTabContent" role="tabpanel" aria-labelledby="orderShippingTab">
            {% embed '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/details_card.html.twig' %}
                {% block header %}
                    {{ carriersTitle }}
                {% endblock %}
                {% block body %}
                    {% include '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/shipping.html.twig' %}
                {% endblock %}
            {% endembed %}
        </div>
        {% if merchandiseReturnEnabled %}
            <div class="tab-pane d-print-block fade" id="orderReturnsTabContent" role="tabpanel" aria-labelledby="orderReturnsTab">
                {% embed '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/details_card.html.twig' %}
                    {% block header %}
                        {{ merchantReturnsTitle }}
                    {% endblock %}
                    {% block body %}
                        {% include '@PrestaShop/Admin/Sell/Order/Order/Blocks/View/merchandise_returns.html.twig' %}
                    {% endblock %}
                {% endembed %}
            </div>
        {% endif %}

        {% if orderForViewing.shipping.recycledPackaging %}
            <span class="badge badge-success">{{ 'Recycled packaging'|trans({}, 'Admin.Orderscustomers.Feature') }}</span>
        {% endif %}

        {% if orderForViewing.shipping.giftWrapping %}
            <span class="badge badge-success">{{ 'Gift wrapping'|trans({}, 'Admin.Orderscustomers.Feature') }}</span>
        {% endif %}
    </div>
</div>

{% set displayAdminOrderTabLink = renderhook('displayAdminOrderTabLink', {'id_order': orderForViewing.id}) %}
{% set displayAdminOrderTabContent = renderhook('displayAdminOrderTabContent', {'id_order': orderForViewing.id}) %}
{% if displayAdminOrderTabLink is not empty or displayAdminOrderTabContent is not empty%}
    <div class="mt-2" id="order_hook_tabs">
        <ul class="nav nav nav-tabs" role="tablist">
            {# Rendering of hook displayAdminOrderTabLink, we expect tab links #}
            {{ displayAdminOrderTabLink|raw }}
        </ul>

        <div class="tab-content">
            {# Rendering of hook displayAdminOrderTabContent, we expect tab contents #}
            {{ displayAdminOrderTabContent|raw }}
        </div>
    </div>
{% endif %}