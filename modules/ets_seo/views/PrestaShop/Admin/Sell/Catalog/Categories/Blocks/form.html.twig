{#**
  * Copyright ETS Software Technology Co., Ltd
 *
 * NOTICE OF LICENSE
 *
 * This file is not open source! Each license that you purchased is only available for 1 website only.
 * If you want to use this file on more websites (or projects), you need to purchase additional licenses.
 * You are not allowed to redistribute, resell, lease, license, sub-license or offer our resources to any third party.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future.
 *
 * @author ETS Software Technology Co., Ltd
 * @copyright  ETS Software Technology Co., Ltd
 * @license    Valid for 1 website (or project) for each purchase of license
 *#}
{# {% extends 'PrestaShopBundle:Admin/Sell/Catalog/Categories/Blocks:form.html.twig' %}

{% block category_form_rest %}
  {{ parent() }}
  {{ ets_category_html | raw }}
{% endblock %} #}

{% if constant('_PS_VERSION_')|number_format >= 9 %}
  {% extends '@!PrestaShop/Admin/Sell/Catalog/Categories/Blocks/form.html.twig' %}
{% elseif constant('_PS_VERSION_')|number_format >= 8 %}
  {% import '@PrestaShop/Admin/macros.html.twig' as ps %}
{% else %}
  {% import 'PrestaShopBundle:Admin:macros.html.twig' as ps %}
{% endif %}

{% block category_form_block %}
  {% if constant('_PS_VERSION_')|number_format >= 9 %}
    {{ form_start(categoryForm, {attr: {'data-id': categoryId|default(0)}}) }}
    <div class="tab-content ets_seo_categories">
      <ul class="nav nav-tabs" id="admin_category_tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link active js-ets-seo-tab-customize" id="category-seo-content-tab" data-toggle="tab" href="#category-seo-content" role="tab" aria-controls="home" aria-selected="true">{% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['Content'] }}{% else %}{{'Content'}}{% endif %}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-ets-seo-tab-customize" id="category-seo-setting-tab" data-toggle="tab" href="#category-seo-setting" role="tab" aria-controls="profile" aria-selected="false">{% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['SEO settings'] }}{% else %}{{'SEO settings'}}{% endif %}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-ets-seo-tab-customize" id="category-seo-analysis-tab" data-toggle="tab" href="#category-seo-analysis" role="tab" aria-controls="contact" aria-selected="false">
            {% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['SEO analysis'] }}{% else %}{{'SEO analysis'}}{% endif %}
          </a>
        </li>
      </ul>
      <div class="tab-pane fade show active" id="category-seo-content" role="tabpanel" aria-labelledby="category-seo-content-tab">
        <div class="card">
          <h3 class="card-header">
            {{ 'Category'|trans({}, 'Admin.Catalog.Feature') }}
          </h3>
          <div class="card-body">
            <div class="form-wrapper row">
              <div class="col-md-9">
                {{ form_widget(categoryForm) }}
                <div class="form-group row">
                  <label class="form-control-label"></label>
                  <div class="col-sm">
                    <div class="alert alert-info">
                      <p class="mb-1">
                        <strong>{{ 'You now have three default customer groups.'|trans({}, 'Admin.Catalog.Help') }}</strong>
                      </p>

                      <p>{{ '%group_name% - All people without a valid customer account.'|trans({'%group_name%': '<strong>' ~ defaultGroups.visitorsGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                      <p>{{ '%group_name% - Customer who placed an order with the guest checkout.'|trans({'%group_name%': '<strong>' ~ defaultGroups.guestsGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                      <p>{{ '%group_name% - All people who have created an account on this site.'|trans({'%group_name%': '<strong>' ~ defaultGroups.customersGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-3">
                {% if ets_seo_preview_analysis is defined %}
                  {{ ets_seo_preview_analysis | raw }}
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="category-seo-setting" role="tabpanel" aria-labelledby="category-seo-setting-tab">
        <div class="card">
          <h3 class="card-header">
            {{ 'SEO Settings'|trans({}, 'Admin.Catalog.Feature') }}
          </h3>
          <div class="card-body">
            <div class="row">
              <div class="col-md-9">
                {{ ets_category_seo_setting_html | raw }}
              </div>
              <div class="col-md-3">
                {% if ets_seo_preview_analysis is defined %}
                  {{ ets_seo_preview_analysis | raw }}
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="category-seo-analysis" role="tabpanel" aria-labelledby="category-seo-analysis-tab">
        <div class="card">
          <div class="card-header">
            {{ 'SEO Analysis'|trans({}, 'Admin.Catalog.Feature') }}
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-9">
                {{ ets_category_seo_analysis_html | raw }}
              </div>
              <div class="col-md-3">
                {% if ets_seo_preview_analysis is defined %}
                  {{ ets_seo_preview_analysis | raw }}
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer">
        <a href="{{ path('admin_categories_index') }}" class="btn btn-outline-secondary">
          {{ 'Cancel'|trans({}, 'Admin.Actions') }}
        </a>
        <button class="btn btn-primary float-right" id="save-button">{{ 'Save'|trans({}, 'Admin.Actions') }}</button>
      </div>
    </div>
    {{ form_end(categoryForm) }}
  {% else %}
    {{ form_start(categoryForm) }}
    <div class="tab-content ets_seo_categories">
      <ul class="nav nav-tabs" id="admin_category_tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link active js-ets-seo-tab-customize" id="category-seo-content-tab" data-toggle="tab" href="#category-seo-content" role="tab" aria-controls="home" aria-selected="true">{% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['Content'] }}{% else %}{{'Content'}}{% endif %}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-ets-seo-tab-customize" id="category-seo-setting-tab" data-toggle="tab" href="#category-seo-setting" role="tab" aria-controls="profile" aria-selected="false">{% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['SEO settings'] }}{% else %}{{'SEO settings'}}{% endif %}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-ets-seo-tab-customize" id="category-seo-analysis-tab" data-toggle="tab" href="#category-seo-analysis" role="tab" aria-controls="contact" aria-selected="false">
            {% if ETS_SEO_TWIG_TRANS is defined %}{{ ETS_SEO_TWIG_TRANS['SEO analysis'] }}{% else %}{{'SEO analysis'}}{% endif %}
          </a>
        </li>
      </ul>
      <div class="tab-pane fade show active" id="category-seo-content" role="tabpanel" aria-labelledby="category-seo-content-tab">
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <h3 class="card-header">
                {#{{ 'Category'|trans({}, 'Admin.Catalog.Feature') }}#}&nbsp;
              </h3>
              <div class="card-block row">
                <div class="form-wrapper">
                  <div class="col-md-9">
                    <div class="card-text">
                      {{ form_errors(categoryForm) }}

                      {{ ps.form_group_row(categoryForm.name, {}, {
                        'label': 'Name'|trans({}, 'Admin.Global'),
                        'help': 'Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}'
                      }) }}

                      <div class="form-group row">
                        {{ ps.label_with_help(('Displayed'|trans({}, 'Admin.Global')), ('Click on "Displayed" to index the category on your shop.'|trans({}, 'Admin.Catalog.Help'))) }}
                        <div class="col-sm">
                          {{ form_widget(categoryForm.active) }}
                          <small class="form-text">
                            {{ 'If you want a category to appear in the menu of your shop, go to [1]Modules > Module Manager[/1] and configure your menu module.'|trans({
                              '[1]': '<a href="' ~ path('admin_module_manage') ~ '" class="_blank">',
                              '[/1]': '</a>'
                            }, 'Admin.Catalog.Help')|raw }}
                          </small>
                        </div>
                      </div>

                      {% if categoryForm.id_parent is defined %}
                        <div class="form-group row">
                          <label class="form-control-label">
                            {{ 'Parent category'|trans({}, 'Admin.Catalog.Feature') }}
                          </label>
                          <div class="col-sm">
                            {{ form_widget(categoryForm.id_parent) }}
                          </div>
                        </div>
                      {% endif %}

                      {{ ps.form_group_row(categoryForm.description, {}, {
                        'label': 'Description'|trans({}, 'Admin.Global'),
                        'help': 'Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}'
                      }) }}
                      {% if constant('_PS_VERSION_')|number_format >= 8 %}
                        {{ ps.form_group_row(categoryForm.additional_description, {}, {
                          'label': 'Additional description'|trans({}, 'Admin.Catalog.Feature'),
                          'help': 'Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}'
                        }) }}
                      {% endif %}
                      <div class="form-group row">
                        <label class="form-control-label">
                          {{ 'Category cover image'|trans({}, 'Admin.Catalog.Feature') }}
                        </label>
                        <div class="col-sm">
                          {% include '@PrestaShop/Admin/Sell/Catalog/Categories/Blocks/cover_image.html.twig' %}

                          {{ form_widget(categoryForm.cover_image) }}

                          <small class="form-text">
                            {{ 'This is the main image for your category, displayed in the category page. The category description will overlap this image and appear in its top-left corner.'|trans({}, 'Admin.Catalog.Help') }}
                          </small>
                        </div>
                      </div>

                      <div class="form-group row">
                        <label class="form-control-label">
                          {{ 'Category thumbnail'|trans({}, 'Admin.Catalog.Feature') }}
                        </label>
                        <div class="col-sm">
                          {% include '@PrestaShop/Admin/Sell/Catalog/Categories/Blocks/thumbnail_image.html.twig' %}

                          {{ form_widget(categoryForm.thumbnail_image) }}

                          <small class="form-text">
                            {{ 'Displays a small image in the parent category\'s page, if the theme allows it.'|trans({}, 'Admin.Catalog.Help') }}
                          </small>
                        </div>
                      </div>

                      <div class="form-group row">
                        <label class="form-control-label">
                          {{ 'Menu thumbnails'|trans({}, 'Admin.Catalog.Feature') }}
                        </label>
                        <div class="col-sm">
                          {% include '@PrestaShop/Admin/Sell/Catalog/Categories/Blocks/menu_thumbnail_images.html.twig' %}

                          {% if allowMenuThumbnailsUpload %}
                            {{ form_widget(categoryForm.menu_thumbnail_images) }}
                          {% else %}
                            {{ form_widget(categoryForm.menu_thumbnail_images, {'attr': {'class': 'd-none'}}) }}

                            <div class="alert alert-warning" role="alert">
                              <p class="alert-text">
                                {{ 'You have reached the limit (%s) of files to upload, please remove files to continue uploading'|trans({'%s': maxMenuThumbnails}, 'Admin.Catalog.Notification') }}
                              </p>
                            </div>
                          {% endif %}
                          <small class="form-text">
                            {{ 'The category thumbnail appears in the menu as a small image representing the category, if the theme allows it.'|trans({}, 'Admin.Catalog.Help') }}
                          </small>
                        </div>
                      </div>

                      {{ renderhook('displayBackOfficeCategory') }}

                      {% block category_tool_serp %}
                        {# Do nothing #}
                      {% endblock %}

                      {# old postion meta #}

                      {{ ps.form_group_row(categoryForm.group_association, {}, {
                        'label': 'Group access'|trans({}, 'Admin.Catalog.Feature'),
                        'help': 'Mark all of the customer groups which you would like to have access to this category.'|trans({}, 'Admin.Catalog.Help')
                      }) }}

                      <div class="form-group row">
                        <label class="form-control-label"></label>
                        <div class="col-sm">
                          <div class="alert alert-info">
                            <p class="mb-1">
                              <strong>{{ 'You now have three default customer groups.'|trans({}, 'Admin.Catalog.Help') }}</strong>
                            </p>

                            <p>{{ '%group_name% - All people without a valid customer account.'|trans({'%group_name%': '<strong>' ~ defaultGroups.visitorsGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                            <p>{{ '%group_name% - Customer who placed an order with the guest checkout.'|trans({'%group_name%': '<strong>' ~ defaultGroups.guestsGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                            <p>{{ '%group_name% - All people who have created an account on this site.'|trans({'%group_name%': '<strong>' ~ defaultGroups.customersGroup.name ~ '</strong>'}, 'Admin.Catalog.Feature')|raw }}</p>
                          </div>
                        </div>
                      </div>

                      {% if categoryForm.shop_association is defined %}
                        <div class="form-group row">
                          <label class="form-control-label">
                            {{ 'Shop association'|trans({}, 'Admin.Global') }}
                          </label>
                          <div class="col-sm">
                            {{ form_widget(categoryForm.shop_association) }}
                          </div>
                        </div>
                      {% endif %}

                    </div>
                  </div>
                  <div class="col-md-3">
                    {% if ets_seo_preview_analysis is defined %}
                      {{ ets_seo_preview_analysis | raw }}
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="tab-pane fade" id="category-seo-setting" role="tabpanel" aria-labelledby="category-seo-setting-tab">
        <div class="card">
          <h3 class="card-header">
            {#{{ 'Category'|trans({}, 'Admin.Catalog.Feature') }}#}&nbsp;
          </h3>
          <div class="card-block row">
            <div class="col-md-9">
              <div class="ets-seo-meta-data">
                <h3>{{ 'Search Engine Optimization' |trans({}, 'Admin.Catalog.Feature') }}</h3>
                <p class="meta-data-desc">{{ 'Improve your ranking and how your product page will appear in search engines results.' |trans({}, 'Admin.Catalog.Feature') }}</p>
              </div>
              <div class="card-text">
                <div class="form-group row">
                  {{ ps.label_with_help(('Meta title'|trans({}, 'Admin.Global')), ('Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}')) }}
                  <div class="col-sm">
                    {{ form_widget(categoryForm.meta_title) }}
                  </div>
                </div>
                <div class="form-group row">
                  {{ ps.label_with_help(('Meta description'|trans({}, 'Admin.Global')), ('Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}')) }}
                  <div class="col-sm">
                    {{ form_widget(categoryForm.meta_description) }}
                  </div>
                </div>

                {% set metaKeywordHelp %}
                  {{ 'To add tags, click in the field, write something, and then press the "Enter" key.'|trans({}, 'Admin.Shopparameters.Help') }}
                  {{ 'Invalid characters:'|trans({}, 'Admin.Notifications.Info') ~ ' <>;=#{}' }}
                {% endset %}

                {{ ps.form_group_row(categoryForm.meta_keyword, {}, {
                  'label': 'Meta keywords'|trans({}, 'Admin.Global'),
                  'help': metaKeywordHelp
                }) }}

                {{ ps.form_group_row(categoryForm.link_rewrite, {}, {
                  'label': 'Friendly URL'|trans({}, 'Admin.Global'),
                  'help': 'Only letters, numbers, underscore (_) and the minus (-) character are allowed.'|trans({}, 'Admin.Catalog.Help')
                }) }}

              </div>
            </div>
            <div class="col-md-3">
              {% if ets_seo_preview_analysis is defined %}
                {{ ets_seo_preview_analysis | raw }}
              {% endif %}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-9">
            {{ ets_category_seo_setting_html | raw }}
          </div>
          <div class="col-md-3">
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="category-seo-analysis" role="tabpanel" aria-labelledby="category-seo-analysis-tab">
        <div class="card">
          <div class="card-header">
            {#{{ 'Meta tags'|trans({}, 'Admin.Shopparameters.Feature') }}#}&nbsp;
          </div>
          <div class="card-block row">
            <div class="col-md-9">
              {{ ets_category_seo_analysis_html | raw }}
            </div>
            <div class="col-md-3">
              {% if ets_seo_preview_analysis is defined %}
                {{ ets_seo_preview_analysis | raw }}
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      {% block category_form_rest %}
        {{ form_rest(categoryForm) }}
      {% endblock %}
      <div class="box-footer">
        <a href="{{ path('admin_categories_index') }}" class="btn btn-outline-secondary">
          {{ 'Cancel'|trans({}, 'Admin.Actions') }}
        </a>
        <button class="btn btn-primary float-right">{{ 'Save'|trans({}, 'Admin.Actions') }}</button>
      </div>
    </div>

    {{ form_end(categoryForm) }}
  {% endif %}
{% endblock %}
